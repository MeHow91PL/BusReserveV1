<HTML>

<HEAD>
    <META content="text/html; charset=Windows-1250" http-equiv="content-type; MSThemeCompatible">
    <META name=GENERATOR content="MSHTML 11.00.10570.1001">
    <style>
        .btnCnt {
            display: flex;
        }

        .btn {
            width: 30px;
            height: 30px;
            cursor: pointer;
            margin: 5px;
            opacity: 0.5;
        }

        #bold span {
            font-weight: bold;
        }

        #podkresl span {
            text-decoration: line-through;
        }

        #textArea {
            border: 1px solid #cb98d6;
        }
    </style>
    <script>
        var bold = document.getElementById("bold");
        var podkresl = document.getElementById("podkresl");
        var size = document.getElementById("size");
        var txtarea = document.getElementById("textArea");
        var isBold = false;
        // var start = 0;
        // var end = 0;
        function load() {
            bold = document.getElementById("bold");
            podkresl = document.getElementById("podkresl");
            size = document.getElementById("size");
            txtarea = document.getElementById("textArea");
            isBold = false;
            // start = 0;
            // end = 0;
        }


        function boldClick(e, btn) {
            isBold = !isBold;
            btn.style.borderColor = isBold ? "#0f9add" : "";
            btn.style.opacity = isBold ? "1" : "0.5";
            getSel();
        }

        function getSel() {
            document.getElementById("test1").innerHTML = getCaretPosition(txtarea);
            // document.getElementById("test2").innerHTML = finish;
            // document.getElementById("test3").innerHTML = sel;


        }

        function getCaretPosition(editableDiv) {
           var caretPos= document.selection;
            return caretPos;
        }

        function test(e) {
            // document.getElementById("test1").innerHTML = getCaretPosition(txtarea);
            // document.getElementById("test2").innerHTML = txtarea.selection;
            // document.getElementById("test3").innerHTML = document.selection.focusOffset;
            console.log(document);
            console.log(txtarea);
            console.log(e);
            
            
        }
        

    </script>

</HEAD>

<BODY onload="load()">
    <DIV>
        <TABLE style="WIDTH: 18cm" cellSpacing=0 cellPadding=0 border=0 KSHidden>
            <TBODY>
                <TR>
                    <TD>
                        <div class="btnCnt">
                            <button class="btn" id="bold" onclick="boldClick(event,this)">
                                <span>B</span>
                            </button>
                            <button class="btn" id="podkresl">
                                <span>U</span>
                            </button>
                            <input type="number" id="size" min="1" max="100">
                        </div>
                    </TD>
                </TR>
            </TBODY>
        </TABLE>
        <TABLE style="WIDTH: 18cm" cellSpacing=0 cellPadding=0 border=0 KSHidden>
            <TBODY>
                <TR>
                    <TD>
                        <div id='textArea' onkeydown="test(event)" onkeyup="test(event)" onmousedown="test(event)" onmouseup="test(event)" contenteditable>

                        </div>

                        <div id="test1"></div>
                        <div id="test2"></div>
                        <div id="test3"></div>
                    </TD>
                </TR>
            </TBODY>
        </TABLE>
    </DIV>
</BODY>

</HTML>